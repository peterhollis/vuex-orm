
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>Inserting And Updating Data Â· Vuex ORM</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.0">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="retrieving-data.html" />
    
    
    <link rel="prev" href="../interacting-with-store.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../prologue.html">
            
                <a href="../prologue.html">
            
                    
                    Prologue
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" >
            
                <a target="_blank" href="https://github.com/vuex-orm/vuex-orm/releases">
            
                    
                    Release Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../prologue/what-is-vuex-orm.html">
            
                <a href="../prologue/what-is-vuex-orm.html">
            
                    
                    What Is Vuex ORM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../prologue/installation.html">
            
                <a href="../prologue/installation.html">
            
                    
                    Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../prologue/getting-started.html">
            
                <a href="../prologue/getting-started.html">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../core-components.html">
            
                <a href="../core-components.html">
            
                    
                    Core Components
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../components/models.html">
            
                <a href="../components/models.html">
            
                    
                    Models
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../components/modules-and-store.html">
            
                <a href="../components/modules-and-store.html">
            
                    
                    Modules And Store
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../components/database-and-registration.html">
            
                <a href="../components/database-and-registration.html">
            
                    
                    Database And Registration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../interacting-with-store.html">
            
                <a href="../interacting-with-store.html">
            
                    
                    Interacting With Store
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.4.1" data-path="inserting-and-updating-data.html">
            
                <a href="inserting-and-updating-data.html">
            
                    
                    Inserting And Updating Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="retrieving-data.html">
            
                <a href="retrieving-data.html">
            
                    
                    Retrieving Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="deleting-data.html">
            
                <a href="deleting-data.html">
            
                    
                    Deleting Data
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../relationships.html">
            
                <a href="../relationships.html">
            
                    
                    Relationships
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../relationships/defining-relationships.html">
            
                <a href="../relationships/defining-relationships.html">
            
                    
                    Defining Relationships
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../relationships/inserting-relationships.html">
            
                <a href="../relationships/inserting-relationships.html">
            
                    
                    Inserting Relationships
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../relationships/retrieving-relationships.html">
            
                <a href="../relationships/retrieving-relationships.html">
            
                    
                    Retrieving Relationships
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../advanced-usage.html">
            
                <a href="../advanced-usage.html">
            
                    
                    Advanced Usage
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../advanced/interact-with-store-from-model.html">
            
                <a href="../advanced/interact-with-store-from-model.html">
            
                    
                    Interact With Store From Model
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../advanced/accessors-and-mutators.html">
            
                <a href="../advanced/accessors-and-mutators.html">
            
                    
                    Accessors & Mutators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../advanced/lifecycle-hooks.html">
            
                <a href="../advanced/lifecycle-hooks.html">
            
                    
                    Lifecycle Hooks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../advanced/serialization.html">
            
                <a href="../advanced/serialization.html">
            
                    
                    Serialization
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../digging-deeper.html">
            
                <a href="../digging-deeper.html">
            
                    
                    Digging Deeper
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../digging-deeper/query-class.html">
            
                <a href="../digging-deeper/query-class.html">
            
                    
                    Query Class
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../digging-deeper/plugins.html">
            
                <a href="../digging-deeper/plugins.html">
            
                    
                    Plugins
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../api-reference.html">
            
                <a href="../api-reference.html">
            
                    
                    API Reference
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../api/model.html">
            
                <a href="../api/model.html">
            
                    
                    Model
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Inserting And Updating Data</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="store-inserting-and-updating-data">Store: Inserting And Updating Data</h1><p>To insert or update data, you can dispatch corresponding actions through modules. Let&apos;s see what kind of actions are available.</p><h2 id="inserts">Inserts</h2><p>To create a new data in the store, you can use <code>create</code> and <code>insert</code> action. You should pass an object with data key to the payload.</p><pre><code class="lang-js">store.dispatch(<span class="hljs-string">&apos;entities/users/create&apos;</span>, {
  data: { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">&apos;John&apos;</span> }
})

<span class="hljs-comment">// Or</span>

store.dispatch(<span class="hljs-string">&apos;entities/users/insert&apos;</span>, {
  data: { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">&apos;John&apos;</span> }
})</code></pre>
<p>The difference between <code>create</code> and <code>insert</code> action is whether to keep existing data or not.</p><p>The <code>create</code> method is going to replace all existing data in store and replace with given data.</p><pre><code class="lang-js"><span class="hljs-comment">// Initial State.</span>
{
  entities: {
    users: {
      data: {
        <span class="hljs-string">&apos;2&apos;</span>: { id: <span class="hljs-number">2</span>, name: <span class="hljs-string">&apos;Jane&apos;</span> }
      }
    }
  }
}

<span class="hljs-comment">// `create` is going to replace all existing data with the new one.</span>
store.dispatch(<span class="hljs-string">&apos;entities/users/create&apos;</span>, {
  data: { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">&apos;John&apos;</span> }
})

<span class="hljs-comment">// State after `create`.</span>
{
  entities: {
    users: {
      data: {
        <span class="hljs-string">&apos;1&apos;</span>: { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">&apos;John&apos;</span> }
      }
    }
  }
}</code></pre>
<p>The <code>insert</code> method is going to insert data into the store while keeping existing data. If the inserting data has the same primary key as existing data, that data is going to be replaced by the new one.</p><pre><code class="lang-js"><span class="hljs-comment">// Initial State.</span>
{
  entities: {
    users: {
      data: {
        <span class="hljs-string">&apos;2&apos;</span>: { id: <span class="hljs-number">2</span>, name: <span class="hljs-string">&apos;Jane&apos;</span> }
      }
    }
  }
}

<span class="hljs-comment">// `insert` is going to leave existing data as is.</span>
store.dispatch(<span class="hljs-string">&apos;entities/users/insert&apos;</span>, {
  data: {
    id: <span class="hljs-number">1</span>,
    name: <span class="hljs-string">&apos;John&apos;</span>
  }
})

<span class="hljs-comment">// State after `insert`.</span>
{
  entities: {
    users: {
      data: {
        <span class="hljs-string">&apos;1&apos;</span>: { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">&apos;John&apos;</span> },
        <span class="hljs-string">&apos;2&apos;</span>: { id: <span class="hljs-number">2</span>, name: <span class="hljs-string">&apos;Jane&apos;</span> }
      }
    }
  }
}</code></pre>
<h3 id="insert-many-data">Insert Many Data</h3><p>You can pass an array of objects to insert multiple data. It works for both <code>create</code> and <code>insert</code>.</p><pre><code class="lang-js">store.dispatch(<span class="hljs-string">&apos;entities/users/insert&apos;</span>, {
  data: [
    { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">&apos;John&apos;</span> },
    { id: <span class="hljs-number">2</span>, name: <span class="hljs-string">&apos;Jane&apos;</span> },
  ]
})</code></pre>
<h3 id="default-values">Default Values</h3><p>If you pass an object that has missing fields defined in the model, that field will be automatically generated with the default value defined in the model.</p><pre><code class="lang-js"><span class="hljs-comment">// When you have this model.</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Model</span> </span>{
  <span class="hljs-keyword">static</span> entity = <span class="hljs-string">&apos;users&apos;</span>

  <span class="hljs-keyword">static</span> fields () {
    <span class="hljs-keyword">return</span> {
      id: <span class="hljs-keyword">this</span>.attr(<span class="hljs-literal">null</span>),
      name: <span class="hljs-keyword">this</span>.attr(<span class="hljs-string">&apos;&apos;</span>),
      active: <span class="hljs-keyword">this</span>.attr(<span class="hljs-literal">false</span>)
    }
  }
}

<span class="hljs-comment">// If you insert object that misses some fields...</span>
store.dispatch(<span class="hljs-string">&apos;entities/users/create&apos;</span>, {
  data: { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">&apos;John Doe &apos;</span>}
})

<span class="hljs-comment">// Missing field will be present with its default value.</span>
{
  entities: {
    users: {
      data: {
        <span class="hljs-string">&apos;1&apos;</span>: {
          id: <span class="hljs-number">1</span>,
          name: <span class="hljs-string">&apos;John Doe&apos;</span>,
          active: <span class="hljs-literal">false</span>
        }
      }
    }
  }
}</code></pre>
<h3 id="get-newly-inserted-data">Get Newly Inserted Data</h3><p>Both <code>create</code> and <code>insert</code> will return the created data as Promise so that you can get them as a return value. The return value will contain all of the data that was created.</p><pre><code class="lang-js">store.dispatch(<span class="hljs-string">&apos;entities/users/create&apos;</span>, {
  data: { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">&apos;John Doe&apos;</span> }
}).then((entities) =&gt; {
  <span class="hljs-built_in">console</span>.log(entities)
})

<span class="hljs-comment">/*
  {
    users: [User { id: 1, name: &apos;John Doe&apos; }]
  }
*/</span></code></pre>
<p>If you prefer to use <a href="https://tc39.github.io/ecmascript-asyncawait" target="_blank">async / await</a>, then you can compose inserts like this.</p><pre><code class="lang-js"><span class="hljs-keyword">const</span> entities = <span class="hljs-keyword">await</span> store.dispatch(<span class="hljs-string">&apos;entities/users/create&apos;</span>, {
  data: { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">&apos;John Doe&apos;</span> }
})

<span class="hljs-built_in">console</span>.log(entities)

<span class="hljs-comment">/*
  {
    users: [User { id: 1, name: &apos;John Doe&apos; }]
  }
*/</span></code></pre>
<h3 id="inserting-relationships">Inserting Relationships</h3><p>If you pass data with relationships inside to the <code>create</code> or <code>insert</code> action, those relationships will be normalized and inserted to the store. Please see <a href="relationships/inserting-relationships.md">Inserting Relationships</a> for more detail.</p><h2 id="updates">Updates</h2><p>To update existing data, you can do so with <code>update</code> action. <code>update</code> action takes <code>where</code> condition and <code>data</code> as payload.</p><pre><code class="lang-js">store.dispatch(<span class="hljs-string">&apos;entities/users/update&apos;</span>, {
  where: <span class="hljs-number">2</span>,
  data: { age: <span class="hljs-number">24</span> }
})</code></pre>
<p><code>where</code> condition can be a <code>Number</code> or a <code>String</code> representing the value of the primary key of the model or can be a <code>Function</code> to determine the target data. <code>Function</code> takes the record as the argument and must return <code>Boolean</code>.</p><p><code>data</code> is the data you want to update. <code>data</code> also could be just a plain object, or a <code>Function</code>.</p><p>Let&apos;s see some example here to understand how it works.</p><pre><code class="lang-js"><span class="hljs-comment">// Initial State.</span>
{
  entities: {
    users: {
      <span class="hljs-string">&apos;1&apos;</span>: { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">&apos;John&apos;</span>, age: <span class="hljs-number">20</span> },
      <span class="hljs-string">&apos;2&apos;</span>: { id: <span class="hljs-number">2</span>, name: <span class="hljs-string">&apos;Jane&apos;</span>, age: <span class="hljs-number">30</span> }
    }
  }
}

<span class="hljs-comment">// Update data.</span>
store.dispatch(<span class="hljs-string">&apos;entities/users/update&apos;</span>, {
  where: <span class="hljs-number">2</span>,
  data: { age: <span class="hljs-number">24</span> }
})

<span class="hljs-comment">// State after `update`</span>
{
  entities: {
    users: {
      <span class="hljs-string">&apos;1&apos;</span>: { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">&apos;John&apos;</span>, age: <span class="hljs-number">20</span> },
      <span class="hljs-string">&apos;2&apos;</span>: { id: <span class="hljs-number">2</span>, name: <span class="hljs-string">&apos;Jane&apos;</span>, age: <span class="hljs-number">24</span> }
    }
  }
}</code></pre>
<p>You can pass a function to the <code>where</code> to get more control. Remember to return boolean in this case.</p><pre><code class="lang-js">store.dispatch(<span class="hljs-string">&apos;entities/users/update&apos;</span>, {
  where: (record) =&gt; {
    <span class="hljs-keyword">return</span> record.id === <span class="hljs-number">2</span>
  },

  data: { age: <span class="hljs-number">24</span> }
})</code></pre>
<p>Alternatively, you may pass whole data object as a payload. In this case, the primary key must exist in the data object.</p><pre><code class="lang-js">store.dispatch(<span class="hljs-string">&apos;entities/users/update&apos;</span>, {
  id: <span class="hljs-number">2</span>, <span class="hljs-comment">// &lt;- Primary key must exist.</span>
  age: <span class="hljs-number">24</span>
})

<span class="hljs-comment">// Above code is equivalent to this.</span>
store.dispatch(<span class="hljs-string">&apos;entities/users/update&apos;</span>, {
  where: <span class="hljs-number">2</span>,
  data: { age: <span class="hljs-number">24</span> }
})

<span class="hljs-comment">// And this is same too.</span>
store.dispatch(<span class="hljs-string">&apos;entities/users/update&apos;</span>, {
  where (record) {
    <span class="hljs-keyword">return</span> record.id === <span class="hljs-number">2</span>
  },

  data: { age: <span class="hljs-number">24</span> }
})</code></pre>
<p>Finally, you can pass <code>Function</code> to the <code>data</code>. The <code>Function</code> will receive target record as an argument. Then you can modify any properties. This is especially useful when you want to interact with the field that contains <code>Array</code> or <code>Object</code>.</p><pre><code class="lang-js">store.dispatch(<span class="hljs-string">&apos;entities/users/update&apos;</span>, {
  where: <span class="hljs-number">1</span>,
  data (user) {
    user.name = <span class="hljs-string">&apos;Jane Doe&apos;</span>
    user.arrayField.push(<span class="hljs-number">1</span>)
  }
})</code></pre>
<h3 id="updating-multiple-data">Updating Multiple Data</h3><p>When specifying <code>where</code> condition by a function, it&apos;s possible to update multiple records at once.</p><pre><code class="lang-js"><span class="hljs-comment">// Initial State.</span>
{
  entities: {
    users: {
      <span class="hljs-string">&apos;1&apos;</span>: { id: <span class="hljs-number">1</span>, role: <span class="hljs-string">&apos;user&apos;</span>, active: <span class="hljs-literal">true</span> },
      <span class="hljs-string">&apos;2&apos;</span>: { id: <span class="hljs-number">2</span>, role: <span class="hljs-string">&apos;user&apos;</span>, active: <span class="hljs-literal">true</span> },
      <span class="hljs-string">&apos;3&apos;</span>: { id: <span class="hljs-number">3</span>, role: <span class="hljs-string">&apos;admin&apos;</span>, active: <span class="hljs-literal">true</span> }
    }
  }
}

<span class="hljs-comment">// Update data.</span>
store.dispatch(<span class="hljs-string">&apos;entities/users/update&apos;</span>, {
  where (record) {
    <span class="hljs-keyword">return</span> record.role === <span class="hljs-string">&apos;user&apos;</span>
  },

  data: { active: <span class="hljs-literal">false</span> }
})

<span class="hljs-comment">// State after `update`.</span>
{
  entities: {
    users: {
      <span class="hljs-string">&apos;1&apos;</span>: { id: <span class="hljs-number">1</span>, role: <span class="hljs-string">&apos;user&apos;</span>, active: <span class="hljs-literal">false</span> },
      <span class="hljs-string">&apos;2&apos;</span>: { id: <span class="hljs-number">2</span>, role: <span class="hljs-string">&apos;user&apos;</span>, active: <span class="hljs-literal">false</span> },
      <span class="hljs-string">&apos;3&apos;</span>: { id: <span class="hljs-number">3</span>, role: <span class="hljs-string">&apos;admin&apos;</span>, active: <span class="hljs-literal">true</span> }
    }
  }
}</code></pre>
<h3 id="get-updated-data">Get Updated Data</h3><p>As same as <code>insert</code> or <code>create</code>, the <code>update</code> action also returns updated data as a Promise. However, the data structure that will be returned is change depending on the use of the <code>update</code> action.</p><p>If you pass the whole object to the <code>update</code> action, it will return all updated entities.</p><pre><code class="lang-js">store.dispatch(<span class="hljs-string">&apos;entities/users/update&apos;</span>, { id: <span class="hljs-number">1</span>, age: <span class="hljs-number">24</span> })
  .then((entities) =&gt; {
    <span class="hljs-built_in">console</span>.log(entities)
  })

<span class="hljs-comment">/*
  {
    users: [{ User { id: 1, name: &apos;John Doe&apos;, age: 24 }]
  }
*/</span></code></pre>
<p>When specifying id value in the <code>where</code> property, it will return a single item that was updated.</p><pre><code class="lang-js">store.dispatch(<span class="hljs-string">&apos;entities/users/update&apos;</span>, {
  where: <span class="hljs-number">1</span>,
  data { age: <span class="hljs-number">24</span> }
).then((user) =&gt; {
  <span class="hljs-built_in">console</span>.log(user)
})

<span class="hljs-comment">// User { id: 1, name: &apos;John Doe&apos;, age: 24 },</span></code></pre>
<p>When updating many records by specifying closure to the <code>where</code> property, the returned data will always be an array containing all updated data.</p><pre><code class="lang-js">store.dispatch(<span class="hljs-string">&apos;entities/users/update&apos;</span>, {
  where: record =&gt; record.age === <span class="hljs-number">30</span>,
  data { age: <span class="hljs-number">24</span> }
).then((users) =&gt; {
  <span class="hljs-built_in">console</span>.log(users)
})

<span class="hljs-comment">/*
  [
    User { id: 1, name: &apos;John Doe&apos;, age: 24 },
    User { id: 2, name: &apos;Jane Doe&apos;, age: 24 }
  ]
*/</span></code></pre>
<h2 id="insert-or-update">Insert or Update</h2><p>Sometimes you might want to insert a set of records which includes already existing and new records. When using the <code>insert</code> action you would replace the dataset of an already existing record. This can cause unexpected side effects.</p><p>For example if an API supports dynamic embedding of relationships and doesn&apos;t always return all relationships, the relationships would be emptied when missing on <code>insert</code>.</p><p>For those cases you can use the <code>insertOrUpdate</code> action:</p><pre><code class="lang-js"><span class="hljs-comment">// Initial State.</span>
{
  entities: {
    users: {
      data: {
        <span class="hljs-string">&apos;1&apos;</span>: { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">&apos;John&apos;</span>, roles: [<span class="hljs-number">3</span>] }
      }
    }
  }
}

<span class="hljs-comment">// `insertOrUpdate` is going to add new records and update existing</span>
<span class="hljs-comment">// records (see `update`). Also accepts a single item as data.</span>
store.dispatch(<span class="hljs-string">&apos;entities/users/insertOrUpdate&apos;</span>, {
  data: [
    { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">&apos;Peter&apos;</span> }, 
    { id: <span class="hljs-number">2</span>, name: <span class="hljs-string">&apos;Hank&apos;</span> }
  ]
})

<span class="hljs-comment">// State after `insertOrUpdate`. Roles for Peter won&apos;t be set to empty array</span>
<span class="hljs-comment">// The new record is inserted with an empty relationship.</span>
{
  entities: {
    users: {
      data: {
        <span class="hljs-string">&apos;1&apos;</span>: { id: <span class="hljs-number">1</span>, name: <span class="hljs-string">&apos;Peter&apos;</span>, roles: [<span class="hljs-number">3</span>] }, 
        <span class="hljs-string">&apos;2&apos;</span>: { id: <span class="hljs-number">2</span>, name: <span class="hljs-string">&apos;Hank&apos;</span>, roles: [] }
      }
    }
  }
}</code></pre>
<h2 id="dispatching-actions-from-root-module">Dispatching Actions from Root Module</h2><p>You can dispatch action from root module as well. With this syntax, you must specify the entity manually by passing <code>entity</code> field.</p><pre><code class="lang-js">store.dispatch(<span class="hljs-string">&apos;entities/create&apos;</span>, { entity: <span class="hljs-string">&apos;users&apos;</span>, data: { ... } })

<span class="hljs-comment">// Above is equivalent to this.</span>
store.dispatch(<span class="hljs-string">&apos;entities/users/create&apos;</span>, { data: { ... } })</code></pre>
<p>Note that since root module needs <code>entity</code>, you can&apos;t dispatch <code>update</code> action through root by passing condition directly.</p><pre><code class="lang-js"><span class="hljs-comment">// This would not work.</span>
store.dispatch(<span class="hljs-string">&apos;entities/update&apos;</span>, { id: <span class="hljs-number">2</span>, age: <span class="hljs-number">24</span> })

<span class="hljs-comment">// you must have entity field.</span>
store.dispatch(<span class="hljs-string">&apos;entities/update&apos;</span>, {
  entity: <span class="hljs-string">&apos;users&apos;</span>,
  where: <span class="hljs-number">2</span>,
  data: { age: <span class="hljs-number">24</span> }
})</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../interacting-with-store.html" class="navigation navigation-prev " aria-label="Previous page: Interacting With Store">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="retrieving-data.html" class="navigation navigation-next " aria-label="Next page: Retrieving Data">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Inserting And Updating Data","level":"1.4.1","depth":2,"next":{"title":"Retrieving Data","level":"1.4.2","depth":2,"path":"store/retrieving-data.md","ref":"store/retrieving-data.md","articles":[]},"previous":{"title":"Interacting With Store","level":"1.4","depth":1,"path":"interacting-with-store.md","ref":"interacting-with-store.md","articles":[{"title":"Inserting And Updating Data","level":"1.4.1","depth":2,"path":"store/inserting-and-updating-data.md","ref":"store/inserting-and-updating-data.md","articles":[]},{"title":"Retrieving Data","level":"1.4.2","depth":2,"path":"store/retrieving-data.md","ref":"store/retrieving-data.md","articles":[]},{"title":"Deleting Data","level":"1.4.3","depth":2,"path":"store/deleting-data.md","ref":"store/deleting-data.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["github","edit-link"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"github":{"url":"https://github.com/vuex-orm/vuex-orm"},"edit-link":{"label":"Edit This Page","base":"https://github.com/vuex-orm/vuex-orm/tree/master/docs"},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":false,"twitter":false,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Vuex ORM","links":{"sharing":{"facebook":false,"twitter":false}},"gitbook":">3.0.0"},"file":{"path":"store/inserting-and-updating-data.md","mtime":"2018-04-03T13:30:28.243Z","type":"markdown"},"gitbook":{"version":"3.2.0","time":"2018-04-11T14:59:53.694Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

